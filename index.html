<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>ðŸ”¥ Firebase Ð§Ð°Ñ‚</title>
  <style>
    body { font-family: sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; background: #f0f0f0; }
    header { background: #0088cc; color: white; padding: 1em; text-align: center; font-weight: bold; }
    #chat { flex: 1; padding: 1em; overflow-y: auto; display: flex; flex-direction: column; }
    .msg { margin: 5px 0; padding: 10px; background: white; border-radius: 10px; max-width: 70%; }
    .me { align-self: flex-end; background: #d0f0ff; }
    .other { align-self: flex-start; background: #ffffff; }
    footer { display: flex; padding: 0.5em; background: white; border-top: 1px solid #ccc; }
    input { flex: 1; padding: 10px; border-radius: 8px; border: 1px solid #ccc; margin-right: 5px; }
    button { padding: 10px; border: none; border-radius: 8px; background: #0088cc; color: white; cursor: pointer; }
  </style>
</head>
<body>
  <header>ðŸ’¬ Firebase Ð§Ð°Ñ‚</header>
  <div id="chat"></div>
  <footer>
    <input type="text" id="msgInput" placeholder="Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ..." />
    <button onclick="send()">âž¤</button>
  </footer>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>

  <script>
    // ðŸ” Ð¢Ð²Ð¾Ñ SDK-ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ
    const firebaseConfig = {
      apiKey: "AIzaSyDkddzOzJyOK4JfvGq7S6SD3usXaAGqBog",
      authDomain: "mymessenger-c1bde.firebaseapp.com",
      projectId: "mymessenger-c1bde",
      storageBucket: "mymessenger-c1bde.firebasestorage.app",
      messagingSenderId: "331583803279",
      appId: "1:331583803279:web:10a7a2186d583abdab05fa",
      measurementId: "G-WBT9D86V0W",
      databaseURL: "https://mymessenger-c1bde-default-rtdb.firebaseio.com" // ðŸ”¥ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const chat = document.getElementById("chat");
    const input = document.getElementById("msgInput");

    // Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ Ð½Ð¸Ðº
    const username = "user_" + Math.floor(Math.random() * 1000);

    // ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ° ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ
    function send() {
      const text = input.value.trim();
      if (!text) return;
      db.ref("messages").push({ user: username, text, time: Date.now() });
      input.value = "";
    }

    // ÐŸÑ€Ð¸ÐµÐ¼ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹
    db.ref("messages").limitToLast(50).on("child_added", snap => {
      const msg = snap.val();
      const div = document.createElement("div");
      div.className = "msg " + (msg.user === username ? "me" : "other");
      div.textContent = msg.user + ": " + msg.text;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    });

    input.addEventListener("keydown", e => {
      if (e.key === "Enter") send();
    });
  </script>
</body>
</html>
